(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1092:function(t,e,n){"use strict";n.r(e);var r=n(75),o=n.n(r),a=n(125),i=n.n(a),l=n(84),u=n.n(l),c=n(0),s=n.n(c),f=n(182),p=n.n(f),d=n(86),y=n(616),b=n.n(y),h=n(659),m=n(127),g=n(977),v,O;function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function x(t,e,n){return e&&_(t.prototype,e),n&&_(t,n),t}function j(t,e){return!e||"object"!==w(e)&&"function"!=typeof e?X(t):e}function X(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function P(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&C(t,e)}function C(t,e){return(C=Object.setPrototypeOf||function t(e,n){return e.__proto__=n,e})(t,e)}var k=u.a.toast,T=(v=Object(d.b)(m.b,m.a))(O=function(t){function e(t){var n;return E(this,e),(n=j(this,S(e).call(this,t))).handleTitleChange=function(t){n.setState({title:t})},n.handleEditorChange=function(t){n.setState({editorState:t})},n.handleSubmit=function(){if(n.props.user.is_login){var t=n.state.title;if(null!==t&&void 0!==t&&""!==t){var e=n.state.editorState.toHTML();null!==e&&void 0!==t&&""!==e&&"<p></p>"!==e?p.a.put("/api/post/".concat(n.state.postId),{body:e,title:t,author:n.props.user.name,user_id:n.props.user.id}).then(function(){k.success("\u63d0\u4ea4\u6210\u529f")}).catch(function(){k.error("\u63d0\u4ea4\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5")}):k.prompt("\u5185\u5bb9\u4e0d\u53ef\u4e3a\u7a7a")}else k.prompt("\u6807\u9898\u4e0d\u53ef\u4e3a\u7a7a")}else k.prompt("\u8bf7\u5148\u767b\u9646")},n.state={postId:n.props.match.params.post_id,editorState:Object(h.b)(""),title:""},n}return P(e,t),x(e,[{key:"componentDidMount",value:function t(){var e=this;p.a.get("/api/post/".concat(this.state.postId)).then(function(t){var n=t.data;e.setState({editorState:Object(h.b)(n.body),title:n.title})}).catch(function(t){k.error("\u7f51\u7edc\u9519\u8bef"),console.log(t)})}},{key:"render",value:function t(){return s.a.createElement("div",{className:"page-container"},s.a.createElement("div",{className:"page-title"},"\u521b\u5efa\u6587\u7ae0"),s.a.createElement(b.a,null,s.a.createElement(i.a,{value:this.state.title,onChange:this.handleTitleChange,addonBefore:"\u6807\u9898",size:"large",placeholder:"\u8bf7\u8f93\u5165\u6807\u9898",style:{width:"500px",marginBottom:"15px"},hasClear:!0,hasLimitHint:!0,trim:!0}),s.a.createElement(h.a,{value:this.state.editorState,onChange:this.handleEditorChange}),s.a.createElement("hr",null),s.a.createElement(o.a,{type:"primary",onClick:this.handleSubmit},"\u63d0\u4ea4")))}}]),e}(s.a.Component))||O,N=e.default=T},615:function(t,e,n){n(615),n(618)},616:function(t,e,n){"use strict";n(615),Object.defineProperty(e,"__esModule",{value:!0});var r,o=a(n(619));function a(t){return t&&t.__esModule?t:{default:t}}e.default=o.default},618:function(t,e,n){},619:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,o=d(n(184)),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l,u,c=n(0),s=d(c),f,p=d(n(1));function d(t){return t&&t.__esModule?t:{default:t}}function y(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function m(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var g=(u=l=function(t){function e(){var t,n,r,o;b(this,e);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return n=r=h(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(i))),r.renderChildren=function(){var t=r.props,e=t.error,n=t.empty,o=t.children;return e?s.default.createElement("div",{style:{padding:"80px 0",textAlign:"center"}},s.default.createElement("img",{style:{width:"108px"},src:"https://img.alicdn.com/tfs/TB1KJkbRFXXXXbRXVXXXXXXXXXX-216-218.png",alt:"\u6570\u636e\u52a0\u8f7d\u9519\u8bef"}),s.default.createElement("p",{style:{width:"80%",margin:"30px auto 0",color:"#999",textAlign:"center"}},e)):n?s.default.createElement("div",{style:{padding:"80px 0",textAlign:"center"}},s.default.createElement("img",{style:{width:"97px"},src:"https://img.alicdn.com/tfs/TB1df3oRFXXXXbEXFXXXXXXXXXX-194-220.png",alt:"\u6570\u636e\u4e3a\u7a7a"}),s.default.createElement("p",{style:{width:"80%",margin:"30px auto 0",color:"#999",textAlign:"center"}},n)):o},h(r,o=n)}return m(e,t),i(e,[{key:"render",value:function t(){var e=this.props,n=e.loading,r=e.children,i=e.title,l=e.style,u=e.className,c=e.error,f=e.empty,p=y(e,["loading","children","title","style","className","error","empty"]),d=a({backgroundColor:"#fff",borderRadius:"6px",padding:"20px",marginBottom:"20px"},l);return n?s.default.createElement(o.default,{shape:"fusion-reactor",color:"#66AAFF",style:{width:"100%"}},s.default.createElement("div",{className:"container-block "+u,style:d},r)):s.default.createElement("div",a({className:"container-block "+u,style:d},p),i&&s.default.createElement("h4",{style:{height:"16px",lineHeight:"16px",fontSize:"16px",color:"#333",fontWeight:"bold",margin:0,padding:0,marginBottom:"20px"}},i),this.renderChildren())}}]),e}(c.Component),l.displayName="Container",l.propTypes={loading:p.default.bool,error:p.default.any,empty:p.default.any,style:p.default.object,className:p.default.string,title:p.default.string},l.defaultProps={loading:!1,error:!1,empty:!1,style:{},className:"",title:""},u);e.default=g},658:function(t,e,n){},659:function(t,e,n){"use strict";var r=n(636),o=n.n(r),a=n(0),i=n.n(a),l=n(658);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function c(){return(c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}function d(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}function m(t,e){return(m=Object.setPrototypeOf||function t(e,n){return e.__proto__=n,e})(t,e)}var g=function(t){function e(){return s(this,e),d(this,b(e).apply(this,arguments))}return h(e,t),p(e,[{key:"render",value:function t(){return i.a.createElement(o.a,c({},this.props,{media:{uploadFn:O,validateFn:v}}))}}]),e}(i.a.Component),v=function t(e){return e.size<10485760},O=function t(e){var n="/api/media",r=new XMLHttpRequest,o=new FormData,a=function t(n){console.log(n),e.success({url:r.responseText,meta:{id:"xxx",title:"xxx",alt:"xxx",loop:!0,autoPlay:!0,controls:!0,poster:""}})},i=function t(n){e.progress(n.loaded/n.total*100)},l=function t(){e.error({msg:"unable to upload."})};r.upload.addEventListener("progress",i,!1),r.addEventListener("load",a,!1),r.addEventListener("error",l,!1),r.addEventListener("abort",l,!1),o.append("file",e.file),r.open("POST",n,!0),r.send(o)};n.d(e,"b",function(){return w}),n.d(e,"a",function(){return g});var w=o.a.createEditorState},977:function(t,e,n){}}]);