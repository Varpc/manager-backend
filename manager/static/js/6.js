(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1070:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),a=r(13),c=r.n(a),i=r(57),l=r.n(i),s=r(829),m=r.n(s),u=r(93),f=r.n(u),p=r(133),d=r(43),y=r(39),b=r(997),h,E;function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function j(e,t,r){return t&&w(e.prototype,t),r&&w(e,r),e}function O(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?I(e):t}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}function x(e,t){return(x=Object.setPrototypeOf||function e(t,r){return t.__proto__=r,t})(e,t)}var _=m.a.CropUpload,C,k=(h=Object(d.b)(y.b,y.a))(E=Object(p.b)(E=function(e){function t(e){var r;return g(this,t),(r=O(this,S(t).call(this,e))).beforeCrop=function(e){return e.size>3145728?(l.a.alert({content:"\u56fe\u7247\u5c3a\u5bf8\u8d85\u8fc7\u6700\u5927\u9650\u5236 3MB\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\uff01",closable:!1,title:"\u88c1\u526a\u63d0\u9192"}),!1):new Promise(function(t,r){var n=new FileReader;n.onload=function(){var e=new Image;e.onload=function(){e.width<=1200&&e.height<=1200?t():(l.a.alert({content:"\u56fe\u7247\u5bbd\u5ea6\u4e3a".concat(e.width,"px, \u9ad8\u5ea6\u4e3a").concat(e.height,"px,\u8d85\u8fc7\u6700\u5927\u9650\u5236 1200px\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\uff01"),closable:!1,title:"\u88c1\u526a\u63d0\u9192"}),r())},e.src=n.result},n.readAsDataURL(e)})},r.onError=function(e){console.log("error",e),c.a.toast.error("\u4e0a\u4f20\u5931\u8d25")},r.onSuccess=function(e){c.a.toast.success("\u8bbe\u7f6e\u6210\u529f"),r.props.cookies.remove("user"),r.props.actions.updateInfo({image:e.imgURL}),r.setState({image:e.imgURL})},r.state={userId:r.props.user.id,image:r.props.user.image},r}return P(t,e),j(t,[{key:"render",value:function e(){return o.a.createElement(_,{action:"/api/user/".concat(this.state.userId,"/image"),name:"file",preview:!0,previewList:[80,60,40],minCropBoxSize:100,beforeCrop:this.beforeCrop,onSuccess:this.onSuccess,onError:this.onError},o.a.createElement("div",{className:"head-img"},o.a.createElement(f.a,{src:this.state.image,width:150,height:150,className:"img-item"}),o.a.createElement("div",{className:"img-flow"}),o.a.createElement("div",{className:"img-text"},o.a.createElement("svg",{className:"Zi Zi--Camera UserAvatarEditor-cameraIcon",fill:"currentColor",viewBox:"0 0 24 24",width:"36",height:"36"},o.a.createElement("path",{d:"M20.094 6S22 6 22 8v10.017S22 20 19 20H4.036S2 20 2 18V7.967S2 6 4 6h3s1-2 2-2h6c1 0 2 2 2 2h3.094zM12 16a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7zm0 1.5a5 5 0 1 0-.001-10.001A5 5 0 0 0 12 17.5zm7.5-8a1 1 0 1 0 0-2 1 1 0 0 0 0 2z",fillRule:"evenodd"})))))}}]),t}(o.a.Component))||E)||E,F=r(28),L=r.n(F),B=r(143),N=r.n(B),R=r(77),T=r(5),z=r.n(T),J=r(998),U,V;function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){D(e,t,r[t])})}return e}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function H(e,t,r){return t&&Z(e.prototype,t),r&&Z(e,r),e}function W(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?G(e):t}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}function X(e,t){return(X=Object.setPrototypeOf||function e(t,r){return t.__proto__=r,t})(e,t)}var Y=(U=Object(d.b)(y.b,y.a))(V=Object(p.b)(V=function(e){function t(e){var r;return M(this,t),(r=W(this,K(t).call(this,e))).checkPassword=function(e,t,r){t?t.length<8?r("\u5bc6\u7801\u5fc5\u987b\u5927\u4e8e8\u4f4d"):t.length>16?r("\u5bc6\u7801\u5fc5\u987b\u5c0f\u4e8e16\u4f4d"):r():r("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5bc6\u7801")},r.checkConfirmPassword=function(e,t,n){t?t&&t!==r.state.value.password?n("\u4e24\u6b21\u8f93\u5165\u5bc6\u7801\u4e0d\u4e00\u81f4"):n():n("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5bc6\u7801")},r.onClick=function(){var e=r.state.value,t=e.name,n=e.banji,o=e.vjid,a=r.state.value,i=a.codeforces,l=a.blog,s=a.password,m=a.confirmPassword;if(t=t.replace(/[ ]/g,""),n=n.replace(/[ ]/g,""),o=o.replace(/[ ]/g,""),""!==t)if(""!==n)if(""!==o)if(s===m)if((s.length<8||s.length>16)&&""!==s)c.a.toast.prompt("\u5bc6\u7801\u5e94\u57288\u523016\u4e3a\u4e4b\u95f4");else{var u={name:t,banji:n,vjid:o};""!==l&&(u.blog=l),""!==s&&(u.password=s),""!==i&&(u.codeforces=i),z.a.post("/api/user/".concat(r.state.userId),q({},u)).then(function(){c.a.toast.success("\u4fee\u6539\u6210\u529f"),r.props.cookies.remove("user"),r.props.actions.updateInfo(u)}).catch(function(){c.a.toast.error("\u4f3c\u4e4e\u51fa\u4e86\u4e9b\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5")})}else c.a.toast.prompt("\u4e24\u6b21\u5bc6\u7801\u4e0d\u4e00\u81f4");else c.a.toast.prompt("Virtual Judge\u7528\u6237\u540d\u4e0d\u53ef\u4e3a\u7a7a");else c.a.toast.prompt("\u73ed\u7ea7\u4e0d\u53ef\u4e3a\u7a7a");else c.a.toast.prompt("\u59d3\u540d\u4e0d\u53ef\u4e3a\u7a7a")},r.state={userId:r.props.user.id,value:{blog:r.props.user.blog?r.props.user.blog:"",banji:r.props.user.banji,vjid:r.props.user.vjid?r.props.user.vjid:"",codeforces:r.props.user.codeforces?r.props.user.codeforces:"",password:"",confirmPassword:"",name:r.props.user.name}},r}return Q(t,e),H(t,[{key:"render",value:function e(){return o.a.createElement("div",{style:$.container},o.a.createElement(R.FormBinderWrapper,{value:this.state.value,onChange:this.formChange},o.a.createElement("div",{style:$.content},o.a.createElement("div",{style:$.formItem},o.a.createElement("span",{style:$.formItemLabel},"\u540d\u5b57\uff1a"),o.a.createElement(R.FormBinder,{name:"name",required:!0,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u540d\u5b57"},o.a.createElement(N.a,{placeholder:"\u771f\u5b9e\u59d3\u540d",style:{width:"400px"}})),o.a.createElement(R.FormError,{style:$.formItemError,name:"name"})),o.a.createElement("div",{style:$.formItem},o.a.createElement("span",{style:$.formItemLabel},"\u73ed\u7ea7\uff1a"),o.a.createElement(R.FormBinder,{name:"banji",required:!0,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u73ed\u7ea7"},o.a.createElement(N.a,{placeholder:"\u73ed\u7ea7",style:{width:"400px"}})),o.a.createElement(R.FormError,{style:$.formItemError,name:"baji"})),o.a.createElement("div",{style:$.formItem},o.a.createElement("span",{style:$.formItemLabel},"VJudge ID\uff1a"),o.a.createElement(R.FormBinder,{name:"vjid",required:!0,message:"Virtual Judge\u7528\u6237\u540d"},o.a.createElement(N.a,{placeholder:"\u8bf7\u8f93\u5165Virtual Judge\u7528\u6237\u540d",style:{width:"400px"}})),o.a.createElement(R.FormError,{style:$.formItemError,name:"vjid"})),o.a.createElement("div",{style:$.formItem},o.a.createElement("span",{style:$.formItemLabel},"Codeforces\uff1a"),o.a.createElement(R.FormBinder,{name:"codeforces"},o.a.createElement(N.a,{placeholder:"\u8bf7\u8f93\u5165Codeforces\u7528\u6237\u540d(\u53ef\u9009)",style:{width:"400px"}})),o.a.createElement(R.FormError,{style:$.formItemError,name:"codeforces"})),o.a.createElement("div",{style:$.formItem},o.a.createElement("span",{style:$.formItemLabel},"\u535a\u5ba2\uff1a"),o.a.createElement(R.FormBinder,{name:"blog",type:"url",message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684url"},o.a.createElement(N.a,{placeholder:"\u535a\u5ba2\u5730\u5740(\u53ef\u9009)",style:{width:"400px"}})),o.a.createElement(R.FormError,{style:$.formItemError,name:"blog"})),o.a.createElement("div",{style:$.formItem},o.a.createElement("span",{style:$.formItemLabel},"\u65b0\u5bc6\u7801\uff1a"),o.a.createElement(R.FormBinder,{name:"password",validator:this.checkPassword},o.a.createElement(N.a,{htmlType:"password",placeholder:"\u8f93\u5165\u65b0\u5bc6\u7801(\u53ef\u9009)",style:{width:"400px"}})),o.a.createElement(R.FormError,{style:$.formItemError,name:"password"})),o.a.createElement("div",{style:$.formItem},o.a.createElement("span",{style:$.formItemLabel},"\u786e\u8ba4\u5bc6\u7801\uff1a"),o.a.createElement(R.FormBinder,{name:"confirmPassword",validator:this.checkConfirmPassword},o.a.createElement(N.a,{htmlType:"password",placeholder:"\u8f93\u5165\u786e\u8ba4\u5bc6\u7801(\u53ef\u9009)",style:{width:"400px"}})),o.a.createElement(R.FormError,{style:$.formItemError,name:"confirmPassword"})),o.a.createElement(L.a,{type:"primary",onClick:this.onClick,style:{marginLeft:"400px"}},"\u63d0 \u4ea4"))))}}]),t}(n.Component))||V)||V,$={formItem:{marginBottom:"20px",display:"flex",alignItems:"center"},formItemLabel:{width:"120px",mariginRight:"10px",display:"inline-block",textAlign:"right"},formItemError:{marginLeft:"10px"},preview:{border:"1px solid #eee",marginTop:20,padding:10}},ee=Y,te=r(999);function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ae(e,t,r){return t&&oe(e.prototype,t),r&&oe(e,r),e}function ce(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?ie(e):t}function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function se(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}function me(e,t){return(me=Object.setPrototypeOf||function e(t,r){return t.__proto__=r,t})(e,t)}var ue=function(e){function t(e){var r;return ne(this,t),(r=ce(this,le(t).call(this,e))).state={},r}return se(t,e),ae(t,[{key:"render",value:function e(){return o.a.createElement("div",{className:"editinfo-container"},o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"content-header"}),o.a.createElement("div",{className:"content-user"},o.a.createElement(k,null),o.a.createElement("div",{className:"content-user-info"},o.a.createElement(ee,null)))))}}]),t}(o.a.Component),fe=t.default=ue},997:function(e,t,r){},998:function(e,t,r){},999:function(e,t,r){}}]);