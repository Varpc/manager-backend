(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{1095:function(e,t,n){"use strict";n.r(t);var r=n(75),o=n.n(r),a=n(125),i=n.n(a),l=n(84),u=n.n(l),c=n(0),f=n.n(c),s=n(182),p=n.n(s),d=n(86),y=n(616),b=n.n(y),m=n(659),h=n(127),g=n(976),v,O;function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}function X(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}function C(e,t){return(C=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}var T=u.a.toast,k=(v=Object(d.b)(h.b,h.a))(O=function(e){function t(e){var n;return E(this,t),(n=X(this,S(t).call(this,e))).handleTitleChange=function(e){n.setState({title:e})},n.handleEditorChange=function(e){n.setState({editorState:e})},n.handleSubmit=function(){if(n.props.user.is_login){var e=n.state.title;if(null!==e&&void 0!==e&&""!==e){var t=n.state.editorState.toHTML();null!==t&&void 0!==e&&""!==t&&"<p></p>"!==t?p.a.post("/api/post",{body:t,title:e,author:n.props.user.name,user_id:n.props.user.id}).then(function(){T.success("\u63d0\u4ea4\u6210\u529f")}).catch(function(){T.error("\u63d0\u4ea4\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5")}):T.prompt("\u5185\u5bb9\u4e0d\u53ef\u4e3a\u7a7a")}else T.prompt("\u6807\u9898\u4e0d\u53ef\u4e3a\u7a7a")}else T.prompt("\u8bf7\u5148\u767b\u9646")},n.state={editorState:Object(m.b)(""),title:""},n}return P(t,e),x(t,[{key:"render",value:function e(){return f.a.createElement("div",{className:"page-container"},f.a.createElement("div",{className:"page-title"},"\u521b\u5efa\u6587\u7ae0"),f.a.createElement(b.a,null,f.a.createElement(i.a,{value:this.state.title,onChange:this.handleTitleChange,addonBefore:"\u6807\u9898",size:"large",placeholder:"\u8bf7\u8f93\u5165\u6807\u9898",style:{width:"500px",marginBottom:"15px"},hasClear:!0,hasLimitHint:!0,trim:!0}),f.a.createElement(m.a,{value:this.state.editorState,onChange:this.handleEditorChange}),f.a.createElement("hr",null),f.a.createElement(o.a,{type:"primary",onClick:this.handleSubmit},"\u63d0\u4ea4")))}}]),t}(f.a.Component))||O,N=t.default=k},615:function(e,t,n){n(615),n(618)},616:function(e,t,n){"use strict";n(615),Object.defineProperty(t,"__esModule",{value:!0});var r,o=a(n(619));function a(e){return e&&e.__esModule?e:{default:e}}t.default=o.default},618:function(e,t,n){},619:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=d(n(184)),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l,u,c=n(0),f=d(c),s,p=d(n(1));function d(e){return e&&e.__esModule?e:{default:e}}function y(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=(u=l=function(e){function t(){var e,n,r,o;b(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return n=r=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.renderChildren=function(){var e=r.props,t=e.error,n=e.empty,o=e.children;return t?f.default.createElement("div",{style:{padding:"80px 0",textAlign:"center"}},f.default.createElement("img",{style:{width:"108px"},src:"https://img.alicdn.com/tfs/TB1KJkbRFXXXXbRXVXXXXXXXXXX-216-218.png",alt:"\u6570\u636e\u52a0\u8f7d\u9519\u8bef"}),f.default.createElement("p",{style:{width:"80%",margin:"30px auto 0",color:"#999",textAlign:"center"}},t)):n?f.default.createElement("div",{style:{padding:"80px 0",textAlign:"center"}},f.default.createElement("img",{style:{width:"97px"},src:"https://img.alicdn.com/tfs/TB1df3oRFXXXXbEXFXXXXXXXXXX-194-220.png",alt:"\u6570\u636e\u4e3a\u7a7a"}),f.default.createElement("p",{style:{width:"80%",margin:"30px auto 0",color:"#999",textAlign:"center"}},n)):o},m(r,o=n)}return h(t,e),i(t,[{key:"render",value:function e(){var t=this.props,n=t.loading,r=t.children,i=t.title,l=t.style,u=t.className,c=t.error,s=t.empty,p=y(t,["loading","children","title","style","className","error","empty"]),d=a({backgroundColor:"#fff",borderRadius:"6px",padding:"20px",marginBottom:"20px"},l);return n?f.default.createElement(o.default,{shape:"fusion-reactor",color:"#66AAFF",style:{width:"100%"}},f.default.createElement("div",{className:"container-block "+u,style:d},r)):f.default.createElement("div",a({className:"container-block "+u,style:d},p),i&&f.default.createElement("h4",{style:{height:"16px",lineHeight:"16px",fontSize:"16px",color:"#333",fontWeight:"bold",margin:0,padding:0,marginBottom:"20px"}},i),this.renderChildren())}}]),t}(c.Component),l.displayName="Container",l.propTypes={loading:p.default.bool,error:p.default.any,empty:p.default.any,style:p.default.object,className:p.default.string,title:p.default.string},l.defaultProps={loading:!1,error:!1,empty:!1,style:{},className:"",title:""},u);t.default=g},658:function(e,t,n){},659:function(e,t,n){"use strict";var r=n(636),o=n.n(r),a=n(0),i=n.n(a),l=n(658);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function d(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}var g=function(e){function t(){return f(this,t),d(this,b(t).apply(this,arguments))}return m(t,e),p(t,[{key:"render",value:function e(){return i.a.createElement(o.a,c({},this.props,{media:{uploadFn:O,validateFn:v}}))}}]),t}(i.a.Component),v=function e(t){return t.size<10485760},O=function e(t){var n="/api/media",r=new XMLHttpRequest,o=new FormData,a=function e(n){console.log(n),t.success({url:r.responseText,meta:{id:"xxx",title:"xxx",alt:"xxx",loop:!0,autoPlay:!0,controls:!0,poster:""}})},i=function e(n){t.progress(n.loaded/n.total*100)},l=function e(){t.error({msg:"unable to upload."})};r.upload.addEventListener("progress",i,!1),r.addEventListener("load",a,!1),r.addEventListener("error",l,!1),r.addEventListener("abort",l,!1),o.append("file",t.file),r.open("POST",n,!0),r.send(o)};n.d(t,"b",function(){return w}),n.d(t,"a",function(){return g});var w=o.a.createEditorState},976:function(e,t,n){}}]);