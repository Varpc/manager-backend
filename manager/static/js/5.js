(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1079:function(t,e,n){"use strict";n.r(e);var o=n(28),r=n.n(o),a=n(143),i=n.n(a),u=n(13),c=n.n(u),l=n(0),s=n.n(l),p=n(5),f=n.n(p),d=n(43),y=n(19),b=n.n(y),h=n(756),m=n(39),v=n(972),g,O;function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function S(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function j(t,e,n){return e&&E(t.prototype,e),n&&E(t,n),t}function _(t,e){return!e||"object"!==w(e)&&"function"!=typeof e?x(t):e}function x(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function C(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}function T(t,e){return(T=Object.setPrototypeOf||function t(e,n){return e.__proto__=n,e})(t,e)}var k=c.a.toast,L=(g=Object(d.b)(m.b,m.a))(O=function(t){function e(t){var n;return S(this,e),(n=_(this,P(e).call(this,t))).handleTitleChange=function(t){n.setState({title:t})},n.handleEditorChange=function(t){n.setState({editorState:t})},n.handleSubmit=function(){if(n.props.user.is_login){var t=n.state.title;if(null!==t&&void 0!==t&&""!==t){var e=n.state.editorState.toHTML();null!==e&&void 0!==t&&""!==e&&"<p></p>"!==e?f.a.put("/api/post/".concat(n.state.postId),{body:e,title:t,author:n.props.user.name,user_id:n.props.user.id}).then(function(){k.success("\u63d0\u4ea4\u6210\u529f")}).catch(function(){k.error("\u63d0\u4ea4\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5")}):k.prompt("\u5185\u5bb9\u4e0d\u53ef\u4e3a\u7a7a")}else k.prompt("\u6807\u9898\u4e0d\u53ef\u4e3a\u7a7a")}else k.prompt("\u8bf7\u5148\u767b\u9646")},n.state={postId:n.props.match.params.post_id,editorState:Object(h.b)(""),title:""},n}return C(e,t),j(e,[{key:"componentDidMount",value:function t(){var e=this;f.a.get("/api/post/".concat(this.state.postId)).then(function(t){var n=t.data;e.setState({editorState:Object(h.b)(n.body),title:n.title})}).catch(function(t){k.error("\u7f51\u7edc\u9519\u8bef"),console.log(t)})}},{key:"render",value:function t(){return s.a.createElement("div",{className:"page-container"},s.a.createElement("div",{className:"page-title"},"\u521b\u5efa\u6587\u7ae0"),s.a.createElement(b.a,null,s.a.createElement(i.a,{value:this.state.title,onChange:this.handleTitleChange,addonBefore:"\u6807\u9898",size:"large",placeholder:"\u8bf7\u8f93\u5165\u6807\u9898",style:{width:"500px",marginBottom:"15px"},hasClear:!0,hasLimitHint:!0,trim:!0}),s.a.createElement(h.a,{value:this.state.editorState,onChange:this.handleEditorChange}),s.a.createElement("hr",null),s.a.createElement(r.a,{type:"primary",onClick:this.handleSubmit},"\u63d0\u4ea4")))}}]),e}(s.a.Component))||O,F=e.default=L},755:function(t,e,n){},756:function(t,e,n){"use strict";var o=n(751),r=n.n(o),a=n(0),i=n.n(a),u=n(755);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function f(t,e,n){return e&&p(t.prototype,e),n&&p(t,n),t}function d(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}function m(t,e){return(m=Object.setPrototypeOf||function t(e,n){return e.__proto__=n,e})(t,e)}var v=function(t){function e(){return s(this,e),d(this,b(e).apply(this,arguments))}return h(e,t),f(e,[{key:"render",value:function t(){return i.a.createElement(r.a,l({},this.props,{media:{uploadFn:O,validateFn:g}}))}}]),e}(i.a.Component),g=function t(e){return e.size<10485760},O=function t(e){var n="/api/media",o=new XMLHttpRequest,r=new FormData,a=function t(n){console.log(n),e.success({url:o.responseText,meta:{id:"xxx",title:"xxx",alt:"xxx",loop:!0,autoPlay:!0,controls:!0,poster:""}})},i=function t(n){e.progress(n.loaded/n.total*100)},u=function t(){e.error({msg:"unable to upload."})};o.upload.addEventListener("progress",i,!1),o.addEventListener("load",a,!1),o.addEventListener("error",u,!1),o.addEventListener("abort",u,!1),r.append("file",e.file),o.open("POST",n,!0),o.send(r)};n.d(e,"b",function(){return w}),n.d(e,"a",function(){return v});var w=r.a.createEditorState},972:function(t,e,n){}}]);